<!doctype html> <html lang=en > <meta charset=UTF-8 > <meta name=viewport  content="width=device-width, initial-scale=1"> <link rel=stylesheet  href="/libs/highlight/github.min.css"> <link rel=stylesheet  href="/css/franklin.css"> <link rel=stylesheet  href="/css/basic.css"> <link rel=icon  href="/assets/favicon.png"> <script src="https://kit.fontawesome.com/8106cce1f2.js" crossorigin=anonymous ></script> <title>Finer zoom increments in WebKit</title> <header> <div class=blog-name ><a href="/">Matt Bauman</a></div> <nav> <ul> <li><a href="/">Home</a> <li><a href="/research/">Research+</a> <li><a href="/projects/">Projects</a> <li><a href="/notes/">Notes</a> </ul> <img src="/assets/hamburger.svg" id=menu-icon > </nav> </header> <div class="franklin-content container blog-title"> <h1>Finer zoom increments in WebKit </h1> <h3> <span style="font-weight: lighter; font-style: italic; font-size:smaller"> 07 January 2011 <a type="application/rss+xml" href="/feed.xml"> <i class="fas fa-rss" ></i> </a> </span> </h3> </div> <div class=franklin-content ><p> <p style="float:right"> <img src="/assets/notes/SafariViewMenu.png" alt="The Safari View menu"> </p> I’ve always been annoyed at how large the jumps are between zoom increments in every single web browser. One click of “Zoom In” and suddenly the text is HUGE. I have found it so unhelpful in the past that I had completely forgotten about the feature. But then two things changed:</p> <ol> <li><p>I purchased a high resolution laptop. I really like the display, but it can make text on some websites too small to read comfortably.</p> <li><p>Apple made <em>zoom in</em> a built-in gesture on their trackpads. In almost all applications, the “pinch” and “stretch” gestures gradually zooms the content in and out. In Safari, however, the jump between zoom levels is so large that the zoomed page feels jarringly disjointed from the original.</p> </ol> <p>Fortunately, WebKit is open source and anyone can download and modify the source code. And it’s an extremely simple change &#40;as it should be&#41;. In file <code>WebKit/mac/WebView/WebView.mm</code>, change</p> <pre><code class="c hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >define</span> ZoomMultiplierRatio 1.2f</span></code></pre>
<p>to:</p>
<pre><code class="c hljs"><span class=hljs-meta >#<span class=hljs-meta-keyword >define</span> ZoomMultiplierRatio 1.06265857f</span></code></pre>
<p>To be more precise, you may use <a href="https://gist.github.com/770529">this diff file</a> as a patch. Why <code>1.06265857f</code>? It’s the cube root of 1.2. Since the current zoom level is computed by multiplying by this ratio, using the cube root effectively makes the zoom increment a third of what is previously was.</p>
<p>To compile your very own modified WebKit, go to <code>WebKit/Tools/Scripts</code> and run <code>./build-webkit
--release</code> &#40;it takes a while – about 40 minutes for me&#41;. To use it, open and compile <code>WebKit/Tools/WebKitLauncher/WebKitLauncher.xcodeproj</code> in Xcode. This creates the WebKit.app that is found in the nightly builds. But you’re not done yet. You need to add your custom-built webkit into this app. Navigate into the build directory and right-click on WebKit.app to Show Package Contents. You need to create the directory <code>Contents/Frameworks/10.6</code> &#40;or <code>10.5</code> if you’re still on Leopard&#41;. Finally, copy all the items from <code>WebKit/WebKitBuild/Release</code> into that new folder, and you’re done&#33;</p>
<p>Now if only I could hack Safari to not require such a large gesture to zoom in… but alas that code resides in Apple’s closed source.</p>
<div class=page-foot >
  <div class=copyright >
    &copy; Matt Bauman. Last modified: February 12, 2021. Website built with <a href="https://github.com/tlienart/Franklin.jl">Franklin.jl</a> and the <a href="https://julialang.org">Julia programming language</a>.
  </div>
</div>
</div>